(this["webpackJsonpcommand-center"]=this["webpackJsonpcommand-center"]||[]).push([[79],{2829:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return w}));var n=r(2),a=r.n(n),o=r(11),c=r(6),u=r(7),i=r(49),s=r(8),p=r(9),l=r(258),f=r(456),h=r(347),b=r(106);function d(e,t,r){var n=new b.TransportError(t,r);return n.originalError=e,n}var v=function(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};function g(t,r,n,a){var o=function(t,r){for(var n=e.alloc(t.length),a=0;a<t.length;a++)n[a]=t[a]^r[a%r.length];return n}(t,n),c=e.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),u={version:"U2F_V2",keyHandle:v(o.toString("base64")),challenge:v(c.toString("base64")),appId:location.origin};return Object(h.a)("apdu","=> "+t.toString("hex")),Object(l.sign)(u,r/1e3).then((function(t){var r,n=t.signatureData;if("string"===typeof n){var o,c=e.from((r=n).replace(/-/g,"+").replace(/_/g,"/")+"==".substring(0,3*r.length%4),"base64");return o=a?c.slice(5):c,Object(h.a)("apdu","<= "+o.toString("hex")),o}throw t}))}var m=[];var w=function(t){Object(s.a)(n,t);var r=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=r.call(this)).scrambleKey=void 0,e.unwrap=!0,m.push(Object(i.a)(e)),e}return Object(u.a)(n,[{key:"exchange",value:function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(t,this.exchangeTimeout,this.scrambleKey,this.unwrap);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!("object"===typeof e.t0.metaData)){e.next=14;break}throw 5===e.t0.metaData.code&&(m.forEach((function(e){return e.emit("disconnect")})),m=[]),d(e.t0,"Failed to sign with Ledger device: U2F "+e.t0.metaData.type,"U2F_"+e.t0.metaData.code);case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setScrambleKey",value:function(t){this.scrambleKey=e.from(t,"ascii")}},{key:"setUnwrap",value:function(e){this.unwrap=e}},{key:"close",value:function(){return Promise.resolve()}}],[{key:"open",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:5e3,e.abrupt("return",new n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(f.a);w.isSupported=l.isSupported,w.list=function(){return Object(l.isSupported)().then((function(e){return e?[null]:[]}))},w.listen=function(e){var t=!1;return Object(l.isSupported)().then((function(r){t||(r?(e.next({type:"add",descriptor:null}),e.complete()):e.error(new b.TransportError("U2F browser support is needed for Ledger. Please use Chrome, Opera or Firefox with a U2F extension. Also make sure you're on an HTTPS connection","U2FNotSupported")))})),{unsubscribe:function(){t=!0}}}}.call(this,r(17).Buffer)}}]);
//# sourceMappingURL=79.d565d662.chunk.js.map